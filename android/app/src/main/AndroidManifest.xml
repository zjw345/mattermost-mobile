<manifest xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission-sdk-23 android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.READ_MEDIA_AUDIO"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"
        android:maxSdkVersion="32"
        tools:ignore="ScopedStorage" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"
        android:maxSdkVersion="32"
        tools:ignore="SelectedPhotoAccess" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <!-- ……原有的其他 <uses-permission> 和 <uses-feature> 声明不变…… -->

    <application
        android:name=".MainApplication"
        android:label="@string/app_name"
        android:icon="@mipmap/ic_launcher"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:allowBackup="false"
        android:theme="@style/AppTheme">

        <!-- ========== 极光推送 必需的 Receiver 开始 ========== -->
        <!-- JPush 接收推送消息 -->
        <receiver
            android:name="cn.jpush.android.service.PushReceiver"
            android:enabled="true"
            android:exported="false">
            <intent-filter>
                <action android:name="cn.jpush.android.intent.RECEIVE_MESSAGE" />
                <category android:name="ru.livelace.mattermost" />
            </intent-filter>
        </receiver>

        <!-- 可选：自定义标签/别名操作结果接收器 -->
        <receiver
            android:name=".JPushMessageReceiver"
            android:exported="false">
            <intent-filter>
                <action android:name="cn.jpush.android.intent.TAG_OPERATE_RESULT" />
                <action android:name="cn.jpush.android.intent.ALIAS_OPERATE_RESULT" />
            </intent-filter>
        </receiver>
        <!-- ========== 极光推送 必需的 Receiver 结束 ========== -->

        <!-- 以下为你原始 Manifest 中所有 Activity、Service、Provider、Meta‑data 等声明，保持不变 -->
        <!-- ……原有的 <activity>、<service>、<provider>、<meta‑data> 等全部内容…… -->

        <service
            android:name="com.example.yourown.PushService"
            android:enabled="true"
            android:exported="false"
            android:foregroundServiceType="microphone"
        />

        <!-- Android 14 requires the correct Foreground Service (FGS) type for RNShare -->
        <service
            android:name="androidx.work.impl.foreground.SystemForegroundService"
            android:foregroundServiceType="dataSync"
            android:exported="false"
            android:stopWithTask="false"
            tools:node="merge"
        />

        <!-- ……原有的其他 <service>、<receiver>、<provider> 等声明…… -->

    </application>
</manifest>
